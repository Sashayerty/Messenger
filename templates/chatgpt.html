{% extends "base.html"%}
{% block main %}
<div class="container d-flex justify-content-center mt-5">
  <div class="card" style="width: 100rem; min-height: 40rem;">
    <div class="card-header d-flex justify-content-between" style="align-items: center;">
      #–ß–∞—Ç–∏–∫ —Å ChatGPT <button type="button" class="btn btn-outline-secondary" onclick="location.href ='/delete-chatgpt'">–û—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç</button>
    </div>
    <div class="card-body">
      {% for mess in messages %}
          {% if mess["role"] == 'user' %}
            <p class="text-end">
              {{ current_user.name }}: {{ mess["text"] }}
            </p>
          {% elif  mess["role"] == "assistant" %}
            <p class="text-start text-success-emphasis" style="max-width: 50rem;">
              ChatGPT ü§ñ: {{ mess["text"].replace("`", "").replace("*", "") }}
            </p>
          {% endif %}
      {% endfor %}
    </div>
  </div>
</div>
<div class="container mt-3" style="width: 30rel;">
  <form class="d-flex justify-content-center" action="" method="post">
    {{ form.hidden_tag() }}
    {{ form.message(class="form-control focus-ring focus-ring-dark py-1 px-1 text-decoration-none border rounded-2", type="message", placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ", id='message') }}<br>
    <script>
      document.getElementById("message").value="";
    </script>
              {% for error in form.message.errors %}
                  <div class="alert alert-danger" role="alert">
                      {{ error }}
                  </div>
              {% endfor %}
    {{ form.send(type="submit", class="btn btn-outline-warning") }}
  </form>
</div>
{% endblock %}